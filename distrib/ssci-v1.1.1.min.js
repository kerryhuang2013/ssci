/*! ssci v1.1.1 
 *  JavaScript smoothing, seasonal and regression functions 
 *  2016-02-02 
 *  License: GPL-3.0 
 *  Copyright (C) 2016 Simon West */

var ssci = (function(){ 
  'use strict';


function k_G(a,b,c){return 1/Math.sqrt(2*Math.PI)*Math.exp(-(Math.pow(a-b,2)/(2*Math.pow(c,2))))}function k_E(a,b,c){return Math.abs((a-b)/c)>1?0:.75*(1-Math.pow((a-b)/c,2))}function k_L(a,b,c){return 1/(Math.exp((a-b)/c)+Math.exp(-(a-b)/c))}function k_U(a,b,c){return Math.abs((a-b)/c)>1?0:.5}function k_T(a,b,c){return Math.abs((a-b)/c)>1?0:1-Math.abs((a-b)/c)}function k_Q(a,b,c){return Math.abs((a-b)/c)>1?0:.9375*Math.pow(1-Math.pow((a-b)/c,2),2)}function k_TW(a,b,c){return Math.abs((a-b)/c)>1?0:35/32*Math.pow(1-Math.pow((a-b)/c,2),3)}function k_Co(a,b,c){return Math.abs((a-b)/c)>1?0:Math.PI/4*Math.cos(Math.PI/2*((a-b)/c))}function k_TC(a,b,c){return Math.abs((a-b)/c)>1?0:70/81*Math.pow(1-Math.pow(Math.abs((a-b)/c),3),3)}function k_S(a,b,c){var d=Math.abs((b-a)/c);return.5*Math.exp(-d/Math.SQRT2)*Math.sin(d/Math.SQRT2+Math.PI/4)}function splineInterpolation(a){var b,c=[],d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[];for(b=0;b<a.length-1;b++)c[b]=a[b+1][0]-a[b][0];for(b=1;b<a.length-1;b++)d[b]=3/c[b]*(a[b+1][1]-a[b][1])-3/c[b-1]*(a[b][1]-a[b-1][1]);for(e[0]=1,f[0]=0,g[0]=0,b=1;b<a.length-1;b++)e[b]=2*(a[b+1][0]-a[b-1][0])-c[b-1]*f[b-1],f[b]=c[b]/e[b],g[b]=(d[b]-c[b-1]*g[b-1])/e[b];e[a.length-1]=1,g[a.length-1]=0,h[a.length-1]=0;for(var m=a.length-2;m>=0;m--)h[m]=g[m]-f[m]*h[m+1],j[m]=(a[m+1][1]-a[m][1])/c[m]-c[m]*(h[m+1]+2*h[m])/3,i[m]=(h[m+1]-h[m])/(3*c[m]),k[m]=a[m][1],l[m]=[k[m],j[m],h[m],i[m]];return l}function splineToBezier(a,b,c){var d=[1/3,2/3],e=[(b[0]-a[0])*d[0]+a[0],(b[0]-a[0])*d[1]+a[0]],f=[c[0]+c[1]*(e[0]-a[0])+c[2]*Math.pow(e[0]-a[0],2)+c[3]*Math.pow(e[0]-a[0],3),c[0]+c[1]*(e[1]-a[0])+c[2]*Math.pow(e[1]-a[0],2)+c[3]*Math.pow(e[1]-a[0],3)],g=[(f[0]-Math.pow(1-d[0],3)*a[1]-Math.pow(d[0],3)*b[1])/(3*(1-d[0])*d[0]),(f[1]-Math.pow(1-d[1],3)*a[1]-Math.pow(d[1],3)*b[1])/(3*(1-d[1])*d[1])],h=[];return h[0]=(g[1]-d[1]*g[0]/d[0])*(1/(1-d[1]/d[0])),h[1]=(g[0]-(1-d[0])*h[0])/d[0],[[e[0],h[0]],[e[1],h[1]]]}ssci.fore.ES=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");var c,d=a.length,e=[],f=[],g={};for("number"!=typeof b&&(console.log("Factor appears to not be a number - changed to 0.3"),b=.3),(b>1||0>b)&&(console.log("Factor >1 or <0 - changed to 0.3"),b=.3),c=1;d+1>c;c++)2>c?e.push([a[c][0],a[c-1][1]]):c===d?e.push([+a[c-1][0]+(+a[c-1][0]-a[c-2][0]),a[c-1][1]*b+e[c-2][1]*(1-b)]):e.push([a[c][0],a[c-1][1]*b+e[c-2][1]*(1-b)]);var h=0;for(c=1;d>c;c++)f.push(a[c][1]-e[c-1][1]),console.log(a[c][1],e[c-1][1],a[c][1]-e[c-1][1]),h+=Math.pow(a[c][1]-e[c-1][1],2);return g.output=e,g.residuals=f,g.factor=b,g.sumSquares=h,g},ssci.fore.HoltWinter=function(){function a(){var a;for(0===n.length&&b(),0===o.length&&c(),0===p.length&&d(),a=+i;k>a;a++)n.push(f*e[a][1]/p[a-i]+(1-f)*(n[a-1]+o[a-1])),o.push(g*(n[a]-n[a-1])+(1-g)*o[a-1]),p.push(h*e[a][1]/n[a]+(1-h)*p[a-i]),l.push([e[a][0],(n[a-1]+o[a-1])*p[a-i]]);for(a=+i;k>a;a++)m.push(e[a][1]-l[a-i][1]),j+=Math.pow(e[a][1]-l[a-i][1],2)}function b(){var a,b=0;for(a=0;i>a;a++)b+=e[a][1];for(a=0;i>a;a++)n.push(b/i)}function c(){var a,b=0;for(a=0;i>a;a++)b+=(e[a+i][1]-e[a][1])/i;for(a=0;i>a;a++)o.push(b*(1/i))}function d(){var a,b,c=Math.floor(k/i),d=[];for(a=0;c>a;a++){var f=0;for(b=0;i>b;b++)f+=e[b+a*i][1];f/=i,d.push(f)}for(b=0;i>b;b++){var g=0;for(a=0;c>a;a++)g+=e[b+a*i][1]/d[a];p.push(g/c)}}var e=[],f=.3,g=.3,h=.3,i=12,j=0,k=0,l=[],m=[],n=[],o=[],p=[];return a.initialLevel=function(b){if(!arguments.length)return n[0];n=[];for(var c=0;i>c;c++)n.push(b);return a},a.initialTrend=function(b){if(!arguments.length)return o[0];o=[];for(var c=0;i>c;c++)o.push(b);return a},a.initialSeason=function(b){return arguments.length&&Array.isArray(b)?b.length!==i?NaN:(p=[],p=b,a):p.slice(0,i)},a.period=function(b){return arguments.length?("number"!=typeof i&&(console.log("Period appears to not be a number - changed to 12"),i=12),i=b,a):i},a.data=function(b){if(e=b,k=e.length,i>=k/2)throw new Error("Not enough data to estimate forecasts - need 2*period of data");return a},a.output=function(){return l},a.outputY=function(){return l.map(function(a){return a[1]})},a.residuals=function(){return m},a.sumSquares=function(){return j},a.level=function(b){return 0===arguments.length?f:("number"!=typeof f&&(console.log("Factor appears to not be a number - changed to 0.3"),f=.3),f>1||0>f?(console.log("Factor >1 or <0 - changed to 0.3"),f=.3):f=b,a)},a.trend=function(b){return 0===arguments.length?g:("number"!=typeof g&&(console.log("Trend factor appears to not be a number - changed to 0.3"),g=.3),g>1||0>g?(console.log("Trend >1 or <0 - changed to 0.3"),g=.3):g=b,a)},a.season=function(b){return 0===arguments.length?h:("number"!=typeof h&&(console.log("Seasonal factor appears to not be a number - changed to 0.3"),h=.3),h>1||0>h?(console.log("Season >1 or <0 - changed to 0.3"),h=.3):h=b,a)},a.forecast=function(a){for(var b=[],c=e[1][0]-e[0][0],d=0;a>d;d++){var f=d%i+1;b.push([+e[k-1][0]+c*(d+1),(n[k-1]+(d+1)*o[k-1])*p[k-1-i+f]])}return b},a},ssci.fore.Holt=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");var d=a.length,e=[],f=[],g={};"number"!=typeof b&&(console.log("Factor appears to not be a number - changed to 0.3"),b=.3),(b>1||0>b)&&(console.log("Factor >1 or <0 - changed to 0.3"),b=.3),"number"!=typeof c&&(console.log("Trend factor appears to not be a number - changed to 0.3"),c=.3),(c>1||0>c)&&(console.log("Trend >1 or <0 - changed to 0.3"),c=.3),e.push(a[0]);var h=[],i=[];h.push(a[0][1]),i.push(ssci.regPolyBig(a,1).constants[1]*((a[d-1][0]-a[0][0])/(d-1)));for(var j=1;d>j;j++)h.push(b*a[j][1]+(1-b)*(h[j-1]+i[j-1])),i.push(c*(h[j]-h[j-1])+(1-c)*i[j-1]),e.push([a[j][0],h[j-1]+i[j-1]]);var k=0;for(j=1;d>j;j++)f.push(a[j][1]-e[j][1]),k+=Math.pow(a[j][1]-e[j][1],2);return g.output=e,g.residuals=f,g.factor=[b,c],g.sumSquares=k,g.forecast=function(a){if("number"!=typeof a)throw new Error("Input is not a number");var b=h[h.length-1]+a*i[i.length-1];return b},g};var ssci=ssci||{};ssci.smooth={},ssci.season={},ssci.reg={},ssci.fore={},ssci.ts={},ssci.mr={},ssci.mr.cnegbin=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");if("number"!=typeof a)throw new Error("r is not a number");if("number"!=typeof b)throw new Error("m is not a number");if("number"!=typeof c)throw new Error("b is not a number");if(c>1||0>c)throw new Error("b must be between 0 and 1");a=Math.round(a);var d=0;return d=1>a?this.negbin(0,b,c):this.negbin(a,b,c)+this.cnegbin(a-1,b,c)},ssci.gamma=function(a){var b=7,c=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*this.gamma(1-a));a-=1;for(var d=c[0],e=1;b+2>e;e++)d+=c[e]/(a+e);var f=a+b+.5;return Math.sqrt(2*Math.PI)*Math.pow(f,a+.5)*Math.exp(-f)*d},ssci.mr.nbd_a=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");if("number"!=typeof b)throw new Error("m is not a number");if("number"!=typeof a)throw new Error("b is not a number");if(a>1||0>a)throw new Error("b must be between 0 and 1");var c=b/a,d=-(a*c/Math.log(1-a)),e=d*Math.log(d)+d-1,f=e-(d*Math.log(1+e)-e)/(d/(e+1)-1),g=100,h=1e-15,i=0;do i++,e=f,f=e-(d*Math.log(1+e)-e)/(d/(e+1)-1);while(g>i&&Math.abs(e-f)>h);return e},ssci.mr.negbin=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");if("number"!=typeof a)throw new Error("r is not a number");if("number"!=typeof b)throw new Error("m is not a number");if("number"!=typeof c)throw new Error("b is not a number");if(c>1||0>c)throw new Error("b must be between 0 and 1");a=Math.round(a);var d=this.nbd_a(c,b),e=b/d;return b>=-Math.log(1-c)?this.gamma(e+a)/(this.gamma(a+1)*this.gamma(e))*Math.pow(d+1,-e)*Math.pow(d/(d+1),a):NaN},ssci.reg.determinant=function(a){var b,c,d,e,f,g=[];e=a.length,b=e-2,f=0;for(var h=0;b>=h;h++){for(var i=[],j=0;b>=j;j++)i.push(0);g.push(i)}for(h=0;e>h;h++){c=0,d=0;for(var k=0;e>k;k++){for(var l=0;e>l;l++)l!==h&&k!==b&&(g[c][d]=a[l][k]),l!==h&&c++;c=0,k!==b&&d++}f+=b>0?Math.pow(-1,h+b)*a[h][b]*ssci.determinant(g):Math.pow(-1,h+b)*a[h][b]*g[0][0]}return f},ssci.reg.determinantBig=function(a){var b,c,d,e,f,g=[];e=a.length,b=e-2,f=new Big(0);for(var h=0;b>=h;h++){for(var i=[],j=0;b>=j;j++)i.push(new Big(0));g.push(i)}for(h=0;e>h;h++){c=0,d=0;for(var k=0;e>k;k++){for(var l=0;e>l;l++)l!==h&&k!==b&&(g[c][d]=new Big(a[l][k].valueOf())),l!==h&&c++;c=0,k!==b&&d++}f=b>0?f.plus(a[h][b].times(Math.pow(-1,h+b)).times(this.determinantBig(g))):f.plus(a[h][b].times(Math.pow(-1,h+b)).times(g[0][0]))}return f},ssci.reg.poly=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");b>a.length-1&&(b=a.length-1,console.log("Order changed to "+(a.length-1)));var c,d,e,f,g=[],h=[],i=[],j=[],k=[];for("number"!=typeof b&&(b=2),0>=b&&(b=2),d=0;b+1>d;d++){var l=[],m=[];for(f=0;b+1>f;f++)l.push(0),m.push(0);h.push(l),i.push(m),j.push(0)}for(d=0;b+1>d;d++)for(e=0;b+1>e;e++)for(f=0;f<a.length;f++)h[d][e]+=Math.pow(a[f][0],d+e);for(e=0;b+1>e;e++)for(f=0;f<a.length;f++)j[e]+=Math.pow(a[f][0],e)*a[f][1];for(c=ssci.determinant(h),d=0;b+1>d;d++){for(e=0;b+1>e;e++)for(f=0;b+1>f;f++)f===d?i[e][f]=j[e]:i[e][f]=h[e][f];k.push(ssci.determinant(i)/c)}for(f=0;f<a.length;f++){var n=0;for(e=0;b+1>e;e++)n+=Math.pow(a[f][0],e)*k[e];g.push([a[f][0],n])}return g},ssci.reg.polyBig=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");b>a.length-1&&(b=a.length-1,console.log("Order changed to "+(a.length-1)));var c,d,e,f,g=[],h=[],i=[],j=[],k=[],l=[],m=[],n={},o=[];for("number"!=typeof b&&(b=2),0>=b&&(b=2),d=0;d<a.length;d++){var p=[];p.push(new Big(+a[d][0])),p.push(new Big(+a[d][1])),o.push(p)}for(d=0;b+1>d;d++){var q=[],r=[];for(f=0;b+1>f;f++)q.push(new Big(0)),r.push(new Big(0));i.push(q),j.push(r),k.push(new Big(0))}for(d=0;b+1>d;d++)for(e=0;b+1>e;e++)for(f=0;f<a.length;f++)i[d][e]=i[d][e].plus(o[f][0].pow(d+e));for(e=0;b+1>e;e++)for(f=0;f<a.length;f++)k[e]=k[e].plus(o[f][0].pow(e).times(o[f][1]));if(c=this.determinantBig(i),"0"===c.valueOf())throw new Error("Determinant is zero. Fitted line is not calculable.");for(d=0;b+1>d;d++){for(e=0;b+1>e;e++)for(f=0;b+1>f;f++)f===d?j[e][f]=k[e]:j[e][f]=i[e][f];l.push(this.determinantBig(j).div(c)),m.push(parseFloat(l[d].valueOf()))}for(f=0;f<a.length;f++){var s=new Big(0);for(e=0;b+1>e;e++)s=s.plus(o[f][0].pow(e).times(l[e]));g.push([a[f][0],s.valueOf()]),h.push(a[f][1]-parseFloat(s.toString()))}return n.output=g,n.residuals=h,n.constants=m,n.forecast=function(a){if("number"!=typeof a)throw new Error("Input is not a number");for(var c=new Big(0),d=0;b+1>d;d++)c=c.plus(o[o.length-1][0].plus(a).pow(d).times(l[d]));return c},n},ssci.season.Average=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");var c,d=a.length,e=[];if("object"!=typeof b||!Array.isArray(b))throw console.log(b),new Error("Invalid label parameter");if(b.length!==a.length)throw console.log(b),new Error("Invalid label parameter");var f={},g={},h={},i=0,j=0;for(c=0;c<b.length;c++)b[c]in f?f[b[c]]=f[b[c]]+a[c][1]:f[b[c]]=a[c][1],b[c]in g?g[b[c]]=g[b[c]]+1:g[b[c]]=1,b[c]in h||(h[b[c]]=0),i+=a[c][1],j++;for(var k=Object.keys(h),l=0;l<k.length;l++)h[k[l]]=f[k[l]]*j/(g[k[l]]*i);for(c=0;d>c;c++)e.push([a[c][0],a[c][1]/h[b[c]]]);return e},ssci.season.Difference=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");var c,d=a.length,e=[],f=[];if("number"!=typeof b&&(console.log("frequency appears to not be a number - changed to 12"),b=12),b>d)throw new Error("Not enough data for this frequency");for(c=b;d>c;c++){f[c]=0;for(var g=0;b>g;g++)f[c]+=a[c-g][1];f[c]/=b}for(c=b;d>c;c++)e.push([a[c][0],a[c][1]-a[c-b][1]+f[c]]);return e},ssci.season.MovingAverage=function(a,b,c){if(arguments.length>3||arguments.length<2)throw new Error("Incorrect number of arguments passed");var d,e=a.length,f=[],g=0,h=1,i=[];if("number"!=typeof b&&(b=12),b>e)throw new Error("Not enough data for this frequency");"boolean"!=typeof c&&(c=!0);var j=Math.floor(b/2);for(d=0;b>d;d++)i[d]=1;for(d=b-1;e>d;d++){h=0,g=0;for(var k=d-(b-1);d>=k;k++)g+=a[k][1]*i[h],h++;c?f.push([a[d][0],g/b]):f.push([a[d-j+1][0],g/b])}return f},ssci.smooth.EWMA=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");var c=a.length,d=[];"number"!=typeof b&&(console.log("Factor appears to not be a number - changed to 0.3"),b=.3),(b>1||0>b)&&(console.log("Factor >1 or <0 - changed to 0.3"),b=.3);for(var e=0;c>e;e++)0===e?d.push(a[e]):d.push([a[e][0],a[e][1]*b+d[e-1][1]*(1-b)]);return d},ssci.smooth.Filter=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");var d,e,f=a.length,g=[],h=0,i=0;if("object"!=typeof b||!Array.isArray(b))throw new Error("Filter must be an array");if(b.length%2===0)throw new Error("Filter must be of an odd size");if(b.length<3)throw new Error("Filter size must be greater than 2");if("boolean"!=typeof c&&(c=!0),h=Math.floor(b.length/2),!c)for(d=0;h>d;d++){for(i=0,e=0;2*h+1>e;e++)i+=d+e-h>=0?a[d+e-h][1]*b[e]:a[d][1]*b[e];g.push([a[d][0],i])}for(d=h;f-h>d;d++){for(i=0,e=0;2*h+1>e;e++)i+=a[d+e-h][1]*b[e];g.push([a[d][0],i])}if(!c)for(d=f-h;f>d;d++){for(i=0,e=0;2*h+1>e;e++)i+=f>d+e-h?a[d+e-h][1]*b[e]:a[d][1]*b[e];g.push([a[d][0],i])}return g},ssci.smooth.kernel=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");var d,e=[],f={Uniform:k_U,Triangle:k_T,Epanechnikov:k_E,Quartic:k_Q,Triweight:k_TW,Logistic:k_L,Cosine:k_Co,Gaussian:k_G,Tricube:k_TC,Silverman:k_S},g=[];if("number"==typeof c)for(d=0;d<b.length;d++)g.push(c);else{if("object"!=typeof c||!Array.isArray(c))throw console.log(c),new Error("Invalid scale parameter");if(c.length===b.length)g=c.slice();else{var h=0;for(d=0;d<b.length;d++)g.push(c[h]),d<c.length?h++:h=0}}if("function"!=typeof f[a])throw new Error("Invalid kernel");for(d=0;d<b.length;d++){for(var i=0,j=0,k=0;k<b.length;k++){var l=0;l=f[a](b[d][0],b[k][0],g[d]),i+=l*b[k][1],j+=l}e.push([b[d][0],i/j])}return e},ssci.smooth.kernel2=function(){function a(){var a=[];if("number"==typeof g)for(b=0;b<h.length;b++)a.push(g);else{if("object"!=typeof g||!Array.isArray(g))throw console.log(g),new Error("Invalid scale parameter");if(g.length===h.length)a=g.slice();else{var j=0;for(b=0;b<h.length;b++)a.push(g[j]),b<g.length?j++:j=0}}for(b=0;b<h.length;b++){var k=0,l=0,m=0,n=e[i](h[b][0],h[b][0],a[b]);for(k+=n*h[b][1],l+=n,c=b-1;c>-1&&(m=e[i](h[b][0],h[c][0],a[b]),!(f>m/n));c--)k+=m*h[c][1],l+=m;for(c=b+1;c<h.length&&(m=e[i](h[b][0],h[c][0],a[b]),!(f>m/n));c++)k+=m*h[c][1],l+=m;d.push([h[b][0],k/l])}}var b,c,d=[],e={Uniform:k_U,Triangle:k_T,Epanechnikov:k_E,Quartic:k_Q,Triweight:k_TW,Logistic:k_L,Cosine:k_Co,Gaussian:k_G,Tricube:k_TC,Silverman:k_S},f=.001,g=[],h=[],i="Gaussian";return a.scale=function(b){return arguments.length?(g=b,a):g},a.kernel=function(b){if(!arguments.length)return i;if("function"!=typeof e[b])throw new Error("Invalid kernel");return i=b,a},a.x=function(){return a},a.y=function(){return a},a.output=function(){return d},a.diff=function(b){return arguments.length?(f=b,a):f},a.data=function(b){return h=b,a},a},ssci.smooth.Quadratic=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");var c,d,e,f,g,h=a.length,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=[];"number"!=typeof b&&(console.log("width appears to not be a number - changed to 5"),b=5),b%2===0&&b--,3>b&&(b=5),c=Math.floor(b/2);for(var r=0;h>r;r++){for(var s=r-c;r+c>=s;s++){var t;t=s,0>t&&(t=0),t>h-1&&(t=h-1),i++,j+=a[t][0],k+=Math.pow(a[t][0],2),l+=Math.pow(a[t][0],3),m+=Math.pow(a[t][0],4),n+=a[t][1],o+=a[t][0]*a[t][1],p+=Math.pow(a[t][0],2)*a[t][1]}d=i*(k*m-l*l)-j*(j*m-l*k)+k*(j*l-k*k),e=(k*m-l*l)*n-(j*m-l*k)*o+(j*l-k*k)*p,f=-(j*m-k*l)*n+(i*m-k*k)*o-(i*l-j*k)*p,g=(j*l-k*k)*n-(i*l-j*k)*o+(i*k-j*j)*p,q.push([a[r][0],e/d+a[r][0]*(f/d)+a[r][0]*a[r][0]*(g/d)]),i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0}return q},ssci.smooth.QuadraticBig=function(a,b){if(2!==arguments.length)throw new Error("Incorrect number of arguments passed");var c,d=a.length,e=[];"number"!=typeof b&&(console.log("width appears to not be a number - changed to 5"),b=5),b%2===0&&b--,3>b&&(b=5),c=Math.floor(b/2);for(var f=0;d>f;f++){for(var g=[],h=f-c;f+c>=h;h++)0>h?g.push(a[0]):h>d-1?g.push(a[d-1]):g.push(a[h]);var i=this.regPolyBig(g,2).constants;e.push([a[f][0],i[0]+a[f][0]*i[1]+a[f][0]*a[f][0]*i[2]])}return e},ssci.ts.acf=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");if("number"!=typeof b)throw new Error("maxlag is not a number");if("number"!=typeof c)throw new Error("diffed is not a number");b>a.length-c&&(b=a.length-c,console.log("Not enough points for the number of lags requested. Max lag changed to "+b));var d,e,f,g=[],h=a.length,i=[],j=[];for(d=0;b+1>d;d++)i.push(d);if(c>0)for(d=0;h-1>d;d++)j.push(a[d][1]-a[d+1][1]);else for(d=0;h>d;d++)j.push(a[d][1]);if(c>1)for(e=0;c-1>e;e++){for(d=0;h-1-e>d;d++)j[d]=j[d]-j[d+1];j.pop()}for(d=0;b>=d;d++){var k=0,l=0,m=0;for(f=0;h-c>f;f++)k=j[f]+k;for(k/=h-c,f=0;h-c>f;f++)f<h-i[d]-c&&(l+=(j[f]-k)*(j[f+i[d]]-k)),m+=Math.pow(j[f]-k,2);g.push([d,l/m])}return g},ssci.ts.diff=function(a){for(var b=[],c=0;c<a.length-1;c++)b.push([a[c][0],a[c+1][1]-a[c][1]]);return b},ssci.ts.pacf=function(a,b,c){if(3!==arguments.length)throw new Error("Incorrect number of arguments passed");if("number"!=typeof b)throw new Error("maxlag is not a number");if("number"!=typeof c)throw new Error("diffed is not a number");b>a.length-c&&(b=a.length-c,console.log("Not enough points for the number of lags requested. Max lag changed to "+b));var d,e,f,g=[],h=a.length,i=[],j=[],k=[],l=[];for(d=0;b+1>d;d++)i.push(d);if(c>0)for(d=0;h-1>d;d++)j.push(a[d][1]-a[d+1][1]);else for(d=0;h>d;d++)j.push(a[d][1]);if(c>1)for(e=0;c-1>e;e++){for(d=0;h-1-e>d;d++)j[d]=j[d]-j[d+1];j.pop()}for(d=0;b>=d;d++){var m=0,n=0,o=0;for(f=0;h-c>f;f++)m=j[f]+m;for(m/=h-c,f=0;h-c>f;f++)f<h-i[d]-c&&(n+=(j[f]-m)*(j[f+i[d]]-m)),o+=Math.pow(j[f]-m,2);k.push(n/o)}for(f=0;b>=f;f++){var p=[];for(e=0;b>=e;e++)p.push(NaN);l.push(p)}for(l[0][0]=1,l[1][1]=k[1],f=2;b>=f;f++){var q=0;for(e=1;f>e;e++)f-1!==e&&f-2>0&&(l[f-1][e]=l[f-2][e]-l[f-1][f-1]*l[f-2][f-1-e]),q+=l[f-1][e]*k[f-e];l[f][f]=(k[f]-q)/(1-q)}for(f=0;b>=f;f++)g.push([i[f],l[i[f]][i[f]]]);return g},ssci.interpString=function(a,b){var c="";if("linear"===a)c=b.join("L");else{if("cubic"!==a)throw new Error("Interpolation not defined = "+a);var d=splineInterpolation(b);c+=b[0][0]+","+b[0][1];for(var e=1;e<b.length;e++){var f=splineToBezier(b[e-1],b[e],d[e-1]);c+="C"+f[0][0]+","+f[0][1]+","+f[1][0]+","+f[1][1]+","+b[e][0]+","+b[e][1]}}return c},ssci.objectToPoints=function(a,b,c){return a.map(function(a){var d=[];return d.push(a[b]),d.push(a[c]),d})},ssci.pointsToObject=function(a){return a.map(function(a){var b={};return b.x=a[0],b.y=a[1],b})},ssci.stackMap=function(a,b,c){return a.map(function(a){var d={};return d.x=a[b],d.y=a[c],d})},ssci.stackMaps=function(a,b,c){for(var d=[],e=0;e<c.length;e++)d.push(this.stackMap(a,b,c[e]));return d},ssci.toStringArray=function(a){var b=a.map(function(a){return a[0]+", "+a[1]});return b.join("\n")};
//# sourceMappingURL=ssci-v1.1.1.min.js.map